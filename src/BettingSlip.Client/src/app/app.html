<div class="app-container">
  <header class="dashboard-header">
    <h1>{{ title }}</h1>
    
    <div class="stats">
      <div class="stat">
        <span class="stat-value">{{ totalStakes() | currency:'EUR':'symbol':'1.0-0' }}</span>
        <span class="stat-label">Total Stake</span>
      </div>
      <div class="stat">
        <span class="stat-value">{{ totalPotentialWin() | currency:'EUR':'symbol':'1.0-0' }}</span>
        <span class="stat-label">Potential Win</span>
      </div>
      <div class="stat">
        <span class="stat-value">{{ betslipsCount() }}</span>
        <span class="stat-label">Betslips</span>
      </div>
    </div>

    <div class="header-actions">
      <button class="btn btn-secondary" (click)="refreshBetslips()">ğŸ”„ Refresh</button>
      <button class="btn btn-primary" (click)="addNewBetslip()">â• New Betslip</button>
    </div>
  </header>

  @if (isLoading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading betslips from API...</p>
    </div>
  }

  @if (errorMessage()) {
    <div class="error-banner">
      <span>âš ï¸ {{ errorMessage() }}</span>
      <button class="btn btn-retry" (click)="refreshBetslips()">Try Again</button>
    </div>
  }

  <main class="main-content">
    @switch (betslips().length) {
      @case (0) {
        <div class="empty-state">
          <div class="empty-icon">ğŸŸï¸</div>
          <h2>No Draft Betslips</h2>
          <p>Get started by creating your first betslip</p>
          <button class="btn btn-primary btn-large" (click)="addNewBetslip()">
            Create First Betslip
          </button>
        </div>
      }
      
      @default {
        <div class="betslips-grid">
          @for (betslip of betslips(); track betslip.id; let i = $index) {
            <article 
              class="betslip-card"
              [class.has-selections]="betslip.selections && betslip.selections.length > 0"
              [attr.data-id]="betslip.id">
              
              <header class="card-header">
                <div class="betslip-meta">
                  <span class="betslip-id">#{{ betslip.id | slice:0:8 }}...</span>
                  @switch (betslip.status) {
                    @case ('Draft') { <span class="status-badge draft">Draft</span> }
                    @case ('Placed') { <span class="status-badge placed">Placed</span> }
                    @default { <span class="status-badge">{{ betslip.status }}</span> }
                  }
                </div>
              </header>

              <section class="selections-section">
                @if (betslip.selections && betslip.selections.length > 0) {
                  @for (selection of betslip.selections; track selection.id) {
                    <div class="selection-item">
                      <div class="event-name">{{ selection.eventName }}</div>
                      <div class="selection-details">
                        <span class="market">{{ selection.market }}</span>
                        <span class="odd">@{{ selection.odd | number:'1.2-3' }}</span>
                      </div>
                    </div>
                  }
                } @else {
                  <div class="empty-selections">
                    <span class="empty-icon">ğŸ“</span>
                    <span>No selections added yet</span>
                  </div>
                }
              </section>

              <footer class="card-footer">
                <div class="stat-row">
                  <span class="label">Stake</span>
                  <span class="value">{{ betslip.stakeAmount | currency:'EUR':'symbol':'1.0-0' }}</span>
                </div>
                <div class="stat-row">
                  <span class="label">Potential Win</span>
                  <span class="value">{{ betslip.potentialWin | currency:'EUR':'symbol':'1.0-0' }}</span>
                </div>
                <div class="stat-row odds">
                  <span class="label">Total Odds</span>
                  <span class="value">{{ betslip.totalOdds | number:'1.2-2' }}</span>
                </div>
              </footer>

              <div class="card-actions">
                <button class="btn btn-secondary" (click)="editBetslip(betslip.id)">âœï¸ Edit</button>
                <button 
                  class="btn btn-primary"
                  [disabled]="!(betslip.selections && betslip.selections.length > 0)">
                  ğŸ¯ Place Bet
                </button>
              </div>
            </article>
          }
        </div>
      }
    }
  </main>
</div>
